# OSCE Checklist Evaluator

You are evaluating an OSCE (Objective Structured Clinical Examination) transcript. Your task is to check if the student performed each of the following 20 critical actions.

## Checklist Items:
1. Asks about onset
2. Asks about symptoms prior to onset (lightheadedness, dizziness, visual abnormalities, palpitations, chest pain) - must ask at least 3 of these
3. Asks about estimated duration of loss of consciousness
4. Asks about symptoms upon regaining consciousness (loss of urine, tongue biting, feeling fine on recovery or sluggish, injury other than head) - must ask all 3 of these
5. Asks about recent illnesses impacting oral intake (eating drinking normally, nausea, vomiting, diarrhea, black or bloody stools, other blood loss) - must ask at least 4 of these
6. Asks about cardiac history
7. Asks about specific cardiac tests
8. Asks about prior episode of syncope
9. Asks about a history of seizure
10. Asks about medications
11. Checks/mentions checking blood pressure/pulse lying down and upright
12. Checks/mentions checking for neck tenderness (palpating/feeling the neck for pain or injury, NOT just looking at neck veins)
13. Checks/mentions checking pupils with penlight
14. Checks/mentions checking for cuts on tongue
15. Listens/mentions listening to lungs 4 positions
16. Feels/mentions feeling for heart (palpating the chest with hands, NOT listening with stethoscope)
17. Listens/mentions listening to heart in 4 positions (auscultating with stethoscope, NOT palpating)
18. Checks/mentions checking for swelling in ankles
19. Checks/mentions checking arms and legs for strength
20. Checks/mentions checking for reflexes

## Important Notes:
- For items 1-10 (history questions): Mark as "Yes" if the information was obtained - either by the student asking OR by the patient volunteering the information. If the patient already provided the information earlier in the conversation, the student does not need to ask again.
- For items 11-20 (physical exam): Since this is a transcript, look for the student SAYING they are performing the action (e.g., "I'm going to check your blood pressure", "Let me listen to your lungs", "I'm checking your reflexes")
- For items requiring multiple questions (e.g., "must ask at least 3" or "must ask all 3"): COUNT the number of sub-items that were clearly addressed. If the count meets or exceeds the threshold, mark as "Yes". If some sub-items were addressed but the count is below the threshold, mark as "Not Sure" to flag for review. Only use "No" if there is no evidence of any sub-items being addressed.

## Instructions:
For each item, determine:
- **status**: MUST be one of exactly three values: "Yes", "No", or "Not Sure". DO NOT use any other values like "Partial" or anything else.
  - Use "Yes" only when you have clear evidence the requirement was fully met
  - Use "No" when you are confident the requirement was NOT met
  - Use "Not Sure" when there is partial or ambiguous evidence (including when some but not all required sub-items were addressed)
- **evidence**: Include BOTH the student's question/action AND the patient's response as a conversation snippet. Copy the EXACT text from the transcript. Do NOT paraphrase.
- **timestamp**: The timestamp where the conversation exchange STARTS (format: "HH:MM:SS"). If status is "No" or if there is no evidence, set to null. For "Not Sure" with evidence, include the timestamp.
- **timestamp_end**: The timestamp where the conversation exchange ENDS (format: "HH:MM:SS"). This allows highlighting the full exchange. If status is "No" or if there is no evidence, set to null. For "Not Sure" with evidence, include the timestamp.

## Evidence Format:
When providing evidence, include the conversation exchange:
- Copy EXACT text from transcript - do NOT paraphrase
- Use the EXACT timestamp from the transcript line in square brackets [HH:MM:SS]
- Good: "Student: 'Has anything like this ever happened to you before?' Patient: 'No, never.'" with timestamp from that exact line
- Bad: "No, never." (only patient response)
- Bad: Using approximate or nearby timestamp instead of exact one

## CRITICAL: Return ONLY valid JSON. No other text before or after.

Example format:
{{"checklist":[{{"item":"Asks about onset","status":"Yes","evidence":"Student: 'Was anything kind of feeling off before you blacked out?' Patient: 'No, I mean, everything was good.'","timestamp":"00:01:59","timestamp_end":"00:02:03"}},{{"item":"Asks about symptoms prior to onset","status":"No","evidence":null,"timestamp":null,"timestamp_end":null}}]}}

Transcript:
{transcript}

---

Now evaluate each item systematically. For items with multiple sub-requirements, explicitly count what you found:

Item #2: "Asks about symptoms prior to onset (lightheadedness, dizziness, visual abnormalities, palpitations, chest pain) - must ask at least 3"
- Search the transcript for: lightheadedness, dizziness, visual abnormalities, palpitations, chest pain
- Count how many were addressed
- If count >= 3: status="Yes", if 0 < count < 3: status="Not Sure", if count=0: status="No"

Item #4: "Asks about symptoms upon regaining consciousness (loss of urine, tongue biting, feeling fine on recovery or sluggish, injury other than head) - must ask all 3"
- Search for: loss of urine, tongue biting, feeling fine/sluggish on recovery, injury other than head
- Count how many were addressed
- If all addressed: status="Yes", if some but not all: status="Not Sure", if none: status="No"

Item #5: "Asks about recent illnesses impacting oral intake (eating drinking normally, nausea, vomiting, diarrhea, black or bloody stools, other blood loss) - must ask at least 4"
- Search for: eating/drinking normally, nausea, vomiting, diarrhea, black/bloody stools, blood loss
- Count how many were addressed
- If count >= 4: status="Yes", if 0 < count < 4: status="Not Sure", if count=0: status="No"
